#!/bin/sh

repo_dir=$(pwd)
echo "Updating $repo_dir"

build_dir=$(mktemp -d)
echo "Building in $build_dir"
cd "$build_dir"

git clone --depth 1 https://github.com/ornicar/scalalib
cd scalalib
sbt publish-local
cd ..
cp -rv ~/.ivy2/local/com.github.ornicar "$repo_dir/"

git clone --depth 1 https://github.com/ornicar/Kamon --branch lila
cd Kamon
sbt publish-local
cd ..
cp -rv ~/.ivy2/local/io.kamon "$repo_dir/"

git clone --depth 1 https://github.com/ornicar/maxmind-geoip2-scala --branch customBuild
cd maxmind-geoip2-scala
sbt publish-local
cd ..
cp -rv ~/.ivy2/local/com.sanoma.cda "$repo_dir/"

rm -rf "$build_dir"
